<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Provides a flexible framework for the transfer of 'omics prediction models. This package enables users to adapt glm, lm, and glmnet models to the Flexible Transfer Models (FTM) framework. This allows models to be evaluated in datasets without exact overlap in the predictor variables, without loss in generalisability, re-optimization or access to individual-level data. It leverages an innovative matrix-based approach to re-estimate model parameters (beta coefficients) using both full and reduced sets of predictor variables, enhancing the transferability of prediction models across different datasets.">
<title>Flexible Transfer Models • FTM</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Flexible Transfer Models">
<meta property="og:description" content="Provides a flexible framework for the transfer of 'omics prediction models. This package enables users to adapt glm, lm, and glmnet models to the Flexible Transfer Models (FTM) framework. This allows models to be evaluated in datasets without exact overlap in the predictor variables, without loss in generalisability, re-optimization or access to individual-level data. It leverages an innovative matrix-based approach to re-estimate model parameters (beta coefficients) using both full and reduced sets of predictor variables, enhancing the transferability of prediction models across different datasets.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">FTM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="articles/index.html">Articles</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://metabolomics.baker.edu.au/" aria-label="Baker Metabolomics WebPortal">
    <span class="fa fa fa fa-external-link"></span>
     
    Baker Metabolomics WebPortal
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header"><h1 align="center">
FTM - Flexible Transfer Models
</h1></div>
<p align="center">
<i>Seamlessly transfer omics models between datasets with varying predictors.</i>
</p>
<div align="center">
<a href="https://www.r-project.org/" class="external-link"><img src="https://img.shields.io/badge/r-%23276DC3.svg?style=for-the-badge&amp;logo=r&amp;logoColor=white" alt="R"></a> <a href="https://www.baker.edu.au/" class="external-link"><img src="https://img.shields.io/badge/Baker-%23276DC3?style=for-the-badge" alt="Baker Institute"></a> <br><p align="center">
<i>Love our work? Visit our <a href="https://metabolomics.baker.edu.au/" class="external-link">WebPortal</a>.</i>
</p>
</div>
<div class="section level1">
<h1 id="overview-of-the-ftm-package">Overview of the FTM package<a class="anchor" aria-label="anchor" href="#overview-of-the-ftm-package"></a>
</h1>
<p>Often, with ’omics data, we have a model that we have trained on one dataset and we want to apply it to another dataset. However, the predictors in the new dataset may not be entirely the same as the predictors in the original dataset. This causes an issue, which can traditionally be solved through 2 options:</p>
<ul>
<li>Ignore the missing predictors (effectively setting them to 0)</li>
<li>Recreate the model using a subset of variables that are present in both datasets</li>
</ul>
<p>FTM overcomes this challenge by allowing the model to be evaluated in datasets without exact overlap in the predictor variables, without loss in generalisability, re-optimization, or access to individual-level data. This is achieved by storing intermediate matrices that allow beta coefficients to be recalculated using a subset of original predictors.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of FTM from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://glmnet.stanford.edu" class="external-link">"glmnet"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"glmnet"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"BakerMetabolomics/FlexibleTransferModels"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Load the package. You’ll need to have <a href="https://glmnet.stanford.edu/articles/glmnet.html" class="external-link">glmnet</a> installed to use the FTM package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bakermetabolomics.github.io/FlexibleTransferModels/">FTM</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a basic example which shows you how to convert an existing model to a FTM object and predict outcomes in new dataset:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up the predictors (glmnet requires a matrix)</span></span>
<span><span class="va">predictors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"wt"</span>, <span class="st">"cyl"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. Fitting a glmnet model to the mtcars dataset</span></span>
<span><span class="va">glmnet_model</span> <span class="op">&lt;-</span> <span class="fu">glmnet</span><span class="fu">::</span><span class="fu"><a href="https://glmnet.stanford.edu/reference/cv.glmnet.html" class="external-link">cv.glmnet</a></span><span class="op">(</span><span class="va">predictors</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">am</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Create FTM object using createFTM</span></span>
<span><span class="va">ftmglmnet_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/createFTM.html">createFTM</a></span><span class="op">(</span><span class="va">glmnet_model</span>, x <span class="op">=</span> <span class="va">predictors</span>, y <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">am</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A quick look at the model</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">ftmglmnet_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; Flexible Transfer Model - Generalized Linear Model</span></span>
<span><span class="co">#&gt; ------------------------------------------------------</span></span>
<span><span class="co">#&gt;   Number of predictors: 3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Formula:</span></span>
<span><span class="co">#&gt; am ~ `(Intercept)` + hp + wt + cyl</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt; (Intercept)           hp           wt          cyl  </span></span>
<span><span class="co">#&gt;      6.2245       0.0116      -2.0526      -0.3230</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Extract the beta coefficients from a FTM object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">ftmglmnet_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; (Intercept)          hp          wt         cyl </span></span>
<span><span class="co">#&gt;  6.22451499  0.01164029 -2.05263254 -0.32296485</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="co"># 3. Predict on "new" data</span></span>
<span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"wt"</span>, <span class="st">"cyl"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Predict using the FTM from glmnet model</span></span>
<span><span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">ftmglmnet_model</span>, newdata <span class="op">=</span> <span class="va">new_data</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span><span class="va">predictions</span></span>
<span><span class="co">#&gt;                          am</span></span>
<span><span class="co">#&gt; Mazda RX4         0.5471743</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     0.4172285</span></span>
<span><span class="co">#&gt; Datsun 710        0.7778351</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    0.2626857</span></span>
<span><span class="co">#&gt; Hornet Sportabout 0.2004940</span></span>
<span><span class="co">#&gt; Valiant           0.1689408</span></span>
<span><span class="co">#&gt; Duster 360        0.3025400</span></span>
<span><span class="co">#&gt; Merc 240D         0.2903789</span></span>
<span><span class="co">#&gt; Merc 230          0.3947689</span></span>
<span><span class="co">#&gt; Merc 280          0.2070870</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># 4. Predict on "new" data that has missing predictors</span></span>
<span><span class="va">new_data_missing</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"wt"</span><span class="op">)</span><span class="op">]</span> <span class="co"># missing cyl</span></span>
<span></span>
<span><span class="co"># Predict using the FTM from glmnet model</span></span>
<span><span class="va">predictions_missing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">ftmglmnet_model</span>, newdata <span class="op">=</span> <span class="va">new_data_missing</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span><span class="va">predictions_missing</span></span>
<span><span class="co">#&gt;                          am</span></span>
<span><span class="co">#&gt; Mazda RX4         0.6216695</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     0.4695754</span></span>
<span><span class="co">#&gt; Datsun 710        0.7498350</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    0.2795889</span></span>
<span><span class="co">#&gt; Hornet Sportabout 0.2672955</span></span>
<span><span class="co">#&gt; Valiant           0.1710853</span></span>
<span><span class="co">#&gt; Duster 360        0.3094615</span></span>
<span><span class="co">#&gt; Merc 240D         0.2238860</span></span>
<span><span class="co">#&gt; Merc 230          0.2889472</span></span>
<span><span class="co">#&gt; Merc 280          0.1985376</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p>For more detailed information and advanced usage, please refer to the package vignettes available within R:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/browseVignettes.html" class="external-link">browseVignettes</a></span><span class="op">(</span><span class="st">"FTM"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Contributions to the FTM package are welcome from the community. Bug reports, documentation enhancements, and feature requests can be filed on the <a href="https://github.com/BakerMetabolomics/FlexibleTransferModels/issues" class="external-link">GitHub issues page</a>.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing FTM</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Corey Giles <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6050-1259" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Changyu Yi <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-3839-2292" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Corey Giles, Changyu Yi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
