<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="FTM">
<title>Create FTM object • FTM</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create FTM object">
<meta property="og:description" content="FTM">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FTM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://metabolomics.baker.edu.au/" aria-label="Baker Metabolomics WebPortal">
    <span class="fa fa fa fa-external-link"></span>
     
    Baker Metabolomics WebPortal
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create FTM object</h1>
            
      
      
      <div class="d-none name"><code>create_FTM.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="create-ftm-objects">Create FTM objects<a class="anchor" aria-label="anchor" href="#create-ftm-objects"></a>
</h2>
<p>FTM object can be created from lm, glm, and glmnet models using the
<code>createFTM</code> function. This is a wrapper that passes the model
to specific functions e.g. <code>createFromLm</code> to create FTM
object from a lm object. These functions can be called directly, but
will return an error if you pass in a model that is not supported.</p>
<div class="section level3">
<h3 id="create-ftm-object-from-linear-model">Create FTM object from linear model<a class="anchor" aria-label="anchor" href="#create-ftm-object-from-linear-model"></a>
</h3>
<p>Here, we create a linear model (using lm), then convert it to a FTM
object.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the mtcars dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fit a linear model to the mtcars dataset, predicting mpg from cyl, hp, and wt</span></span>
<span><span class="va">lm_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create FTM object using createFTM</span></span>
<span><span class="va">ftmlm_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createFTM.html">createFTM</a></span><span class="op">(</span><span class="va">lm_model</span><span class="op">)</span> <span class="co"># same as using createFromLm</span></span>
<span></span>
<span><span class="co"># A quick look at the model (shows a ftmlm model)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">ftmlm_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; Flexible Transfer Model - Linear Model</span></span>
<span><span class="co">#&gt; ------------------------------------------------------</span></span>
<span><span class="co">#&gt;   Number of predictors: 3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Formula:</span></span>
<span><span class="co">#&gt; mpg ~ `(Intercept)` + cyl + hp + wt</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt; (Intercept)          cyl           hp           wt  </span></span>
<span><span class="co">#&gt;      38.752       -0.942       -0.018       -3.167</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-ftm-object-from-a-generalized-linear-model">Create FTM object from a generalized linear model<a class="anchor" aria-label="anchor" href="#create-ftm-object-from-a-generalized-linear-model"></a>
</h3>
<p>Just like creating an FTM object from a linear model, we can create
FTM objects from a generalized linear model (binomial family).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a logistic model using the mtcars dataset</span></span>
<span><span class="va">glm_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">am</span> <span class="op">~</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="va">mtcars</span>, family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create FTM object using createFTM</span></span>
<span><span class="va">ftmglm_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createFTM.html">createFTM</a></span><span class="op">(</span><span class="va">glm_model</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A quick look at the model (shows a ftmglm model)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">ftmglm_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; Flexible Transfer Model - Generalized Linear Model</span></span>
<span><span class="co">#&gt; ------------------------------------------------------</span></span>
<span><span class="co">#&gt;   Number of predictors: 3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Formula:</span></span>
<span><span class="co">#&gt; am ~ `(Intercept)` + hp + wt + cyl</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt; (Intercept)           hp           wt          cyl  </span></span>
<span><span class="co">#&gt;     19.7029       0.0326      -9.1495       0.4876</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-ftm-object-from-glmnet-model-both-linear-and-binomial-models">Create FTM object from glmnet model (both linear and binomial
models)<a class="anchor" aria-label="anchor" href="#create-ftm-object-from-glmnet-model-both-linear-and-binomial-models"></a>
</h3>
<p>Creating a FTM object from a glmnet model is just as easy. However,
due to the way glmnet models are stored, we need to manually pass in the
predictor and outcome data. It is recommended to use cv.glmnet in order
to get the optimal lambda (by default, the <code>lambda.min</code> will
be used).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># glmnet requires input data to be in matrices</span></span>
<span><span class="va">predictors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"wt"</span>, <span class="st">"cyl"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fitting a cv.glmnet to the mtcars dataset</span></span>
<span><span class="va">glmnet_model</span> <span class="op">&lt;-</span> <span class="fu">glmnet</span><span class="fu">::</span><span class="fu"><a href="https://glmnet.stanford.edu/reference/cv.glmnet.html" class="external-link">cv.glmnet</a></span><span class="op">(</span><span class="va">predictors</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">am</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create FTM object using createFTM</span></span>
<span><span class="va">ftmglmnet_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createFTM.html">createFTM</a></span><span class="op">(</span><span class="va">glmnet_model</span>, x <span class="op">=</span> <span class="va">predictors</span>, y <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">am</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A quick look at the model (shows a ftmglm model)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">ftmglmnet_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; Flexible Transfer Model - Generalized Linear Model</span></span>
<span><span class="co">#&gt; ------------------------------------------------------</span></span>
<span><span class="co">#&gt;   Number of predictors: 3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Formula:</span></span>
<span><span class="co">#&gt; am ~ `(Intercept)` + hp + wt + cyl</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt; (Intercept)           hp           wt          cyl  </span></span>
<span><span class="co">#&gt;      6.2245       0.0116      -2.0526      -0.3230</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># We can also fit a linear model using glmnet</span></span>
<span><span class="va">glmnet_model</span> <span class="op">&lt;-</span> <span class="fu">glmnet</span><span class="fu">::</span><span class="fu"><a href="https://glmnet.stanford.edu/reference/cv.glmnet.html" class="external-link">cv.glmnet</a></span><span class="op">(</span><span class="va">predictors</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>, family <span class="op">=</span> <span class="st">"gaussian"</span>, alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create FTM object using createFTM</span></span>
<span><span class="va">ftmglmnet_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createFTM.html">createFTM</a></span><span class="op">(</span><span class="va">glmnet_model</span>, x <span class="op">=</span> <span class="va">predictors</span>, y <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A quick look at the model (shows a ftmlm model)</span></span>
<span><span class="fu">show</span><span class="op">(</span><span class="va">ftmglmnet_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; Flexible Transfer Model - Linear Model</span></span>
<span><span class="co">#&gt; ------------------------------------------------------</span></span>
<span><span class="co">#&gt;   Number of predictors: 3</span></span>
<span><span class="co">#&gt;   Optimal lambda: 0.514698</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Formula:</span></span>
<span><span class="co">#&gt; mpg ~ `(Intercept)` + hp + wt + cyl</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt; (Intercept)           hp           wt          cyl  </span></span>
<span><span class="co">#&gt;     35.2179      -0.0191      -2.0949      -0.9021</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Corey Giles, Changyu Yi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
