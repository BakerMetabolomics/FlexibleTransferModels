<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-AU">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Estimating performance when you have fewer variables • FTM</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimating performance when you have fewer variables">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FTM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://metabolomics.baker.edu.au/" aria-label="Baker Metabolomics WebPortal"><span class="fa fa-external-link"></span> Baker Metabolomics WebPortal</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Estimating performance when you have fewer variables</h1>
            
      

      <div class="d-none name"><code>estimating_performance.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="using-ftmlm-objects-to-estimate-the-model-performance">Using FTMlm objects to estimate the model performance<a class="anchor" aria-label="anchor" href="#using-ftmlm-objects-to-estimate-the-model-performance"></a>
</h2>
<p>FTMlm objects allow for the estimation of model performance (R2) for
the full model and a model using a subset of variables. This can be done
using the <code>rsq</code> function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the mtcars dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fit a linear model to the mtcars dataset, predicting mpg from cyl, hp, and wt</span></span>
<span><span class="va">lm_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create FTM object using createFTM</span></span>
<span><span class="va">ftmlm_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createFTM.html">createFTM</a></span><span class="op">(</span><span class="va">lm_model</span><span class="op">)</span> <span class="co"># same as using createFromLm</span></span>
<span></span>
<span><span class="co"># Calculate the model performance</span></span>
<span><span class="fu"><a href="../reference/rsq.html">rsq</a></span><span class="op">(</span><span class="va">ftmlm_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.84315</span></span>
<span></span>
<span><span class="co"># Check the linear model R2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_model</span><span class="op">)</span><span class="op">$</span><span class="va">r.squared</span></span>
<span><span class="co">#&gt; [1] 0.84315</span></span></code></pre></div>
<p>Notice the ftmlm model reports the R2 value and that it matches the
linear model it was created from. This R2 value was calculated using the
parameters stored within the object.</p>
</div>
<div class="section level2">
<h2 id="estimating-model-performance-when-using-a-subset-of-variables">Estimating model performance when using a subset of variables<a class="anchor" aria-label="anchor" href="#estimating-model-performance-when-using-a-subset-of-variables"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the model performance for a model using just cyl + wt</span></span>
<span><span class="fu"><a href="../reference/rsq.html">rsq</a></span><span class="op">(</span><span class="va">ftmlm_model</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cyl"</span>, <span class="st">"wt"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.8302274</span></span>
<span></span>
<span><span class="co"># Verify we get the same performance as a de novo model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">wt</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">r.squared</span></span>
<span><span class="co">#&gt; [1] 0.8302274</span></span>
<span></span>
<span></span>
<span><span class="co"># Calculate the model performance for a model using just hp</span></span>
<span><span class="fu"><a href="../reference/rsq.html">rsq</a></span><span class="op">(</span><span class="va">ftmlm_model</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hp"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.6024373</span></span>
<span></span>
<span><span class="co"># Verify we get the same performance as a de novo model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">r.squared</span></span>
<span><span class="co">#&gt; [1] 0.6024373</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="notes">Notes<a class="anchor" aria-label="anchor" href="#notes"></a>
</h2>
<div class="section level3">
<h3 id="ridge-penalties">Ridge penalties<a class="anchor" aria-label="anchor" href="#ridge-penalties"></a>
</h3>
<p>Estimating model performance with a ridge penalty causes the solution
to not be exact. The estimate is often rather good, but may slightly
under/over estimate the model performance. If this of concern, compare
the model performance with the optimal <code>s</code> and with
<code>s = 0</code>. If these are similar, consider using the estimate
from the non-ridge penalty model.</p>
</div>
<div class="section level3">
<h3 id="glm-models">GLM models<a class="anchor" aria-label="anchor" href="#glm-models"></a>
</h3>
<p>Currently, the estimation of model performance hasn’t been
implemented for ftmglm models. Once we are happy with a solution, we
will implement this feature.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Corey Giles, Changyu Yi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
