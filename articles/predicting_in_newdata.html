<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="FTM">
<title>Predicting in new datasets â€¢ FTM</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predicting in new datasets">
<meta property="og:description" content="FTM">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FTM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://metabolomics.baker.edu.au/" aria-label="Baker Metabolomics WebPortal">
    <span class="fa fa fa fa-external-link"></span>
     
    Baker Metabolomics WebPortal
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Predicting in new datasets</h1>
            
      
      
      <div class="d-none name"><code>predicting_in_newdata.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="using-ftm-objects-to-predict-outcomes-in-new-datasets">Using FTM objects to predict outcomes in new datasets<a class="anchor" aria-label="anchor" href="#using-ftm-objects-to-predict-outcomes-in-new-datasets"></a>
</h2>
<p>FTM objects allow the prediction of outcomes using the
<code>predict</code> function, just like the original model.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a "new" data</span></span>
<span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"wt"</span>, <span class="st">"cyl"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># predict using the FTM from lm model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">ftmlm_model</span>, newdata <span class="op">=</span> <span class="va">new_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;                        mpg</span></span>
<span><span class="co">#&gt; Mazda RX4         22.82043</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     22.01285</span></span>
<span><span class="co">#&gt; Datsun 710        25.96040</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    20.93608</span></span>
<span><span class="co">#&gt; Hornet Sportabout 17.16780</span></span>
<span><span class="co">#&gt; Valiant           20.25036</span></span>
<span><span class="co">#&gt; Duster 360        15.49342</span></span>
<span><span class="co">#&gt; Merc 240D         23.76431</span></span>
<span><span class="co">#&gt; Merc 230          23.29574</span></span>
<span><span class="co">#&gt; Merc 280          19.98901</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># predict using the FTM from glm model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">ftmglm_model</span>, newdata <span class="op">=</span> <span class="va">new_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;                            am</span></span>
<span><span class="co">#&gt; Mazda RX4          2.24194025</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     -0.09117492</span></span>
<span><span class="co">#&gt; Datsun 710         3.45752720</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    -3.20199515</span></span>
<span><span class="co">#&gt; Hornet Sportabout -2.16697131</span></span>
<span><span class="co">#&gt; Valiant           -5.60657399</span></span>
<span><span class="co">#&gt; Duster 360        -1.07498527</span></span>
<span><span class="co">#&gt; Merc 240D         -5.51285476</span></span>
<span><span class="co">#&gt; Merc 230          -4.07135061</span></span>
<span><span class="co">#&gt; Merc 280          -4.83693440</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># predict using the FTM from glmnet model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">ftmglmnet_model</span>, newdata <span class="op">=</span> <span class="va">new_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;                           am</span></span>
<span><span class="co">#&gt; Mazda RX4          1.0705100</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     -0.1690128</span></span>
<span><span class="co">#&gt; Datsun 710         2.1983970</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    -1.8217099</span></span>
<span><span class="co">#&gt; Hornet Sportabout -1.6522074</span></span>
<span><span class="co">#&gt; Valiant           -3.1097932</span></span>
<span><span class="co">#&gt; Duster 360        -0.9237527</span></span>
<span><span class="co">#&gt; Merc 240D         -2.6330120</span></span>
<span><span class="co">#&gt; Merc 230          -1.7972606</span></span>
<span><span class="co">#&gt; Merc 280          -2.6627667</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="ftm-objects-allow-predictions-even-with-missing-variables">FTM objects allow predictions even with missing variables<a class="anchor" aria-label="anchor" href="#ftm-objects-allow-predictions-even-with-missing-variables"></a>
</h2>
<p>The major benefit of FTM objects is that they allow predictions even
when the new dataset has missing variables. This is because of the
flexible structure of the FTM that is achieved by reweighting of the
beta coefficients.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a "new" data with missing variables (missing "cyl")</span></span>
<span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"wt"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># predict using the FTM from lm model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">ftmlm_model</span>, newdata <span class="op">=</span> <span class="va">new_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;                        mpg</span></span>
<span><span class="co">#&gt; Mazda RX4         23.57233</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     22.58348</span></span>
<span><span class="co">#&gt; Datsun 710        25.27582</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    21.26502</span></span>
<span><span class="co">#&gt; Hornet Sportabout 18.32727</span></span>
<span><span class="co">#&gt; Valiant           20.47382</span></span>
<span><span class="co">#&gt; Duster 360        15.59904</span></span>
<span><span class="co">#&gt; Merc 240D         22.88707</span></span>
<span><span class="co">#&gt; Merc 230          21.99367</span></span>
<span><span class="co">#&gt; Merc 280          19.97946</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># predict using the FTM from glm model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">ftmglm_model</span>, newdata <span class="op">=</span> <span class="va">new_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;                           am</span></span>
<span><span class="co">#&gt; Mazda RX4          1.6494977</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     -0.3693964</span></span>
<span><span class="co">#&gt; Datsun 710         3.4227907</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    -3.0612551</span></span>
<span><span class="co">#&gt; Hornet Sportabout -2.5413401</span></span>
<span><span class="co">#&gt; Valiant           -5.1779994</span></span>
<span><span class="co">#&gt; Duster 360        -1.0922657</span></span>
<span><span class="co">#&gt; Merc 240D         -4.5627401</span></span>
<span><span class="co">#&gt; Merc 230          -3.0777025</span></span>
<span><span class="co">#&gt; Merc 280          -4.3823738</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># predict using the FTM from glmnet model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">ftmglmnet_model</span>, newdata <span class="op">=</span> <span class="va">new_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;                           am</span></span>
<span><span class="co">#&gt; Mazda RX4          1.0705100</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     -0.1690128</span></span>
<span><span class="co">#&gt; Datsun 710         2.1983970</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    -1.8217099</span></span>
<span><span class="co">#&gt; Hornet Sportabout -1.6522074</span></span>
<span><span class="co">#&gt; Valiant           -3.1097932</span></span>
<span><span class="co">#&gt; Duster 360        -0.9237527</span></span>
<span><span class="co">#&gt; Merc 240D         -2.6330120</span></span>
<span><span class="co">#&gt; Merc 230          -1.7972606</span></span>
<span><span class="co">#&gt; Merc 280          -2.6627667</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Corey Giles, Changyu Yi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
